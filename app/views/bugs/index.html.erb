<script type="text/javascript">

  var game = new Phaser.Game(1024, 768, Phaser.AUTO, '', { preload: preload, create: create, update: update });

  function preload(){

    game.load.image('paper', '/images/paperbackground.jpg');
    game.load.image('treehouse', '/images/reincarnagebackdropidea.png');
    game.load.image('sky', '/images/sky.png');
    game.load.image('log1', '/images/platform01.png');
    game.load.image('log2', '/images/platform02.png');
    game.load.image('star', '/images/star.png');
    game.load.spritesheet('frog', '/images/dude.png', 32, 48);

  }

  var platforms;

  function create(){

    game.physics.startSystem(Phaser.Physics.ARCADE);

    game.add.sprite(0, 0, 'paper');

    game.add.sprite(0, 0, 'treehouse');


    platforms = game.add.group();

    platforms.enableBody = true;

    var ground = platforms.create(0, game.world.height -5, 'log1');

    ground.scale.setTo(50,3);

    ground.body.immovable = true;

    var tid = setTimeout(logFloat);
    function logFloat() {
    var ledge = platforms.create(1100, 688, 'log1');
    ledge.body.immovable = true;
    ledge.body.velocity.x = -100;
    var ledge = platforms.create(1500, 690, 'log2');
    ledge.body.immovable = true;
    ledge.body.velocity.x = -100;
    var ledge = platforms.create(1900, 687, 'log2');
    ledge.body.immovable = true;
    ledge.body.velocity.x = -100;
    var ledge = platforms.create(2250, 689, 'log1');
    ledge.body.immovable = true;
    ledge.body.velocity.x = -100;
    tid = setTimeout(logFloat, 15500); // repeat myself
    }

    player = game.add.sprite(1002, game.world.height - 450, 'frog')
    game.physics.arcade.enable(player);

    player.body.bounce.y = 0.1;
    player.body.gravity.y = 400;
    player.body.collideWorldBounds = true;

    player.animations.add('left', [0, 1, 2, 3], 10, true);
    player.animations.add('right', [5, 6, 7, 8], 10, true);

    cursors = game.input.keyboard.createCursorKeys();

  }

  function update(){

    game.physics.arcade.collide(player, platforms);

    player.body.velocity.x = 0;

    if (cursors.left.isDown)
    {
      // move player to left
      player.body.velocity.x = -200

      player.animations.play('left');
    }
    else if (cursors.right.isDown)
    {
      // move player right
      player.body.velocity.x = 200

      player.animations.play('right');
    }
    else if (cursors.down.isDown)
    {
      player.body.velocity.y = 400;

      player.frame = 4;
    }
    else
    {
      player.animations.stop();

      player.frame = 4;
    }

    if (cursors.up.isDown && player.body.touching.down)
    {
      player.body.velocity.y = -350;
    }

  }

  </script>